---
layout: post
title: 前端模块化方案
description: 前端模块化分析
categories:
tags: [amd, cmd, commonjs, esm]

image: assets/images/15.jpg
---

1. amd，cmd

CMD 推崇依赖就近，AMD 推崇依赖前置

```js
//AMD requireJS

//包装
define(function (require, exports, module) {
  var a = require("a"),
    b = require("b");


  exports.action = function () {};
});
//加载
require(["math"], function (math) {
  math.add(2, 3);
});

//CMD seaJS

define(function (requie, exports, module) {
  //依赖可以就近书写
  var a = require("./a");
  a.test();

  //...
  //软依赖
  if (status) {
    var b = requie("./b");
    b.test();
  }
});
```


在ES6之前，社区制定了一些模块加载方案，最主要的有CommonJS和AMD两种。前者用于服务器，后者用于浏览器。ES6在语言规格的层面上，实现了模块功能，而且实现得相当简单，完全可以取代现有的CommonJS和AMD规范，成为浏览器和服务器通用的模块解决方案。
// lib/math.js
export function sum(x, y) {
  return x + y;
}
export var pi = 3.141593;
// app.js
import * as math from "lib/math”;
alert("2π = " + math.sum(math.pi, math.pi));
或者这样使用：
// otherApp.js
import {sum, pi} from "lib/math”;
alert("2π = " + sum(pi, pi));
